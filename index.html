<html>
  <head>
    <title>Home</title>
	  <link rel='icon' href='favicon.ico' />
    <link rel="stylesheet" media='screen and (min-width: 901px)' href="css/style.css" />
    <link rel="stylesheet" media='screen and (max-width: 900px)' href="css/narrow.css" />

    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono|Pacifico" rel="stylesheet">
    <script src="js/dots.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script>
      var link_string = "";

      function setCookie(cname, cvalue) {
        var expires = "";
        var date = new Date();
        date.setTime(date.getTime() + (900*24*60*60*1000));
        expires = "; expires=" + date.toUTCString();
        document.cookie = cname + "=" + cvalue + expires + "; path=/";
        //link_string = cname + "=" + cvalue + expires + "; path=/";
      }

      function getCookie(cname) {
        var name = cname + "=";
        var decodedCookie = decodeURIComponent(document.cookie);
  			var ca = decodedCookie.split(';');
  			for(var i = 0; i <ca.length; i++) {
  				var c = ca[i];
  				while (c.charAt(0) == ' ') {
  					c = c.substring(1);
  				}
  				if (c.indexOf(name) == 0) {
  					return c.substring(name.length, c.length);
  				}
  			}
  			return "";
      }

      function saveLinks() {
        var lists = document.getElementsByClassName("all");
        var listCookie = "";

        var tempChild = lists[0].childNodes;
        var tempLi = tempChild[3].children;
        for (var i = 0; i < lists.length; i++) {
          var tempLi = lists[i].children;
          var tempTitle = tempLi[0].innerHTML;
          listCookie += tempTitle + "\\t";

          for (var j = 0; j < tempLi[1].children.length; j++) {

            var tempText = tempLi[1].children[j].children[0].innerHTML;
            var tempLink = tempLi[1].children[j].children[0].href;

            listCookie += " " + tempText + " " + tempLink;
          }
          listCookie += "\\n";

        }
        listCookie = listCookie.substring(0, listCookie.length-3);

        setCookie("link_string", listCookie);
        link_string = listCookie;
      }



      function rebuildLinks() {
  			var list = document.getElementById("ql-list");
  			list.innerHTML = "";

        var all_split = getCookie("link_string").split("\\n");
        //var all_split = link_string.split("\\n");

        var link_split = "";
        var title_split = "";
        var tempAll;

        for (var i = 0; i < all_split.length; i++) {
          tempAll = document.createElement("div");
          tempAll.setAttribute("class", "all");

          console.log(all_split[i]);
          title_split = all_split[i].split("\\t ");
          var tempTitle = document.createElement("h3");

          tempTitle.setAttribute("class", "title " + title_split[0])
          tempTitle.appendChild(document.createTextNode(title_split[0]));

          tempAll.appendChild(tempTitle);

          link_split = title_split[1].split(" ");

          var tempLi, tempA, tempList;
          tempList = document.createElement("ul");
          tempList.setAttribute("class", "linklist");

          for (var j = 0; j < link_split.length; j+=2) {
            tempA = document.createElement("a");
            tempLi = document.createElement("li");

            tempA.appendChild(document.createTextNode(link_split[j]));
    				tempA.setAttribute("href", link_split[j + 1]);

            tempLi.appendChild(tempA);
            tempList.appendChild(tempLi);
          }

          tempAll.appendChild(tempList);
          list.appendChild(tempAll)
        }
  		}
    </script>
  </head>

  <body>
    <canvas class='connecting-dots'></canvas>

    <div id="outer-wrapper">
      <div id="wrapper">

        <h1>Hello</h1>

        <ul id="ql-list">
          <div class="all">
            <h3 class="title social">social</h3>
            <ul class="linklist">
              <li><a href="https://www.youtube.com/feed/subscriptions">youtube</a></li>
              <li><a href="https://www.facebook.com/">facebook</a></li>
              <li><a href="https://www.facebook.com/groups/1270861586364813/photos/">roster</a></li>
            </ul>
          </div>

          <div class="all">
            <h3 class="title reddit">reddit</h3>
            <ul class = "linklist">
              <li><a class = "ql" href="https://www.reddit.com/">front</a></li>
              <li><a href="https://www.reddit.com/r/all">all</a></li>
              <li><a href="https://www.reddit.com/r/endlessfrontier">/r/endlessfrontier</a></li>
              <li><a href="https://www.reddit.com/r/formula1">/r/formula1</a></li>
            </ul>
          </div>

          <div class="all">
            <h3 class="title uni">university</h3>
            <ul class = "linklist">
              <li><a href="https://blackboard.qut.edu.au/webapps/portal/frameset.jsp?tab_tab_group_id=_4_1&url=%2Fwebapps%2Fblackboard%2Fexecute%2FcourseMain%3Fcourse_id%3D_134491_1">cab303</a></li>
              <li><a href="https://blackboard.qut.edu.au/webapps/portal/frameset.jsp?tab_tab_group_id=_4_1&url=%2Fwebapps%2Fblackboard%2Fexecute%2FcourseMain%3Fcourse_id%3D_134497_1">cab403</a></li>
              <li><a href="https://blackboard.qut.edu.au/webapps/portal/frameset.jsp?tab_tab_group_id=_4_1&url=%2Fwebapps%2Fblackboard%2Fexecute%2FcourseMain%3Fcourse_id%3D_135147_1">ifb299</a></li>
              <li><a href="https://qutvirtual3.qut.edu.au/qv/stu_class_reg_graphical_p.show">timetable</a></li>
  	         </ul>
          </div>

          <div class="all">
            <h3 class="title other">other</h3>
            <ul class = "linklist">
              <li><a href="https://www.netflix.com/">netflix</a></li>
              <li><a href="https://internetbanking.suncorpbank.com.au/">suncorp</a></li>
              <li><a href="https://secpayroll.dominos.com.au/frmWelcome.aspx">payroll</a></li>
              <li><a href="https://bambanah.github.io/workout/">nSuns</a></li>
            </ul>
          </div>
        </ul>

      </div>

      <a id="edit-subtitle" href="https://github.com/bambanah/startpage">view on github</a>

    </div>

    <script>
      // var link_string = getCookie("link_string");
      var text_primary = getCookie("text_primary");
      var bg_primary = getCookie("bg_primary");
      var text_secondary = getCookie("text_secondary");
      var bg_secondary = getCookie("bg_secondary");
      var bg_image = getCookie("bg_image");
      var heading_text = getCookie("heading_text");
      var heading_font = getCookie("heading_font");
      var title_font = getCookie("title_font");
      var link_font = getCookie("link_font");

      // if (link_string === "") {
      //   saveLinks();
      // } else {
      //   rebuildLinks();
      // }
      saveLinks();
      rebuildLinks();

      function resetValues() {

      }

    </script>
  </body>
</html>
